<form (ngSubmit)="onSelect()"
      #form="ngForm"
      novalidate>
  <div class="text-center variant-column rounded p-3"
       [class.bg-faded]="isDisabled"
       [class.variant-column-selected]="isSelected">
    <div>
      <h4>{{ variant.name }}</h4>
      <p>variant</p>
    </div>
    <hr/>
    <div *ngFor="let featureGroupDefinition of featureGroupDefinitions; let i = index">
      <h5>&nbsp;</h5>
      <!-- TODO rethink, refactor -->
      <ng-container *ngFor="let featureDefinition of featureGroupDefinition.features; let j = index;">
        <ng-container *ngFor="let feature of [featureForDefinition(featureGroupDefinition, featureDefinition)]; trackBy: trackByFn;">
          <div *ngIf="isInputFieldType(featureDefinition)"
               [class.has-danger]="valueInput.invalid"
               class="form-group">
            <input class="form-control text-center"
                   type="number"
                   [min]="feature.min"
                   [appMin]="feature.min"
                   [max]="feature.max"
                   [appMax]="feature.max"
                   [ngModel]="feature.value"
                   (ngModelChange)="onFeatureValueNgModelChange(i, j, $event)"
                   name="{{i}}-{{j}}-feature-value"
                   required
                   (change)="onChange()"
                   #valueInput="ngModel"
                   [readonly]="isDisabled">
          </div>
          <div class="form-group"
               *ngIf="isStaticValueFieldType(featureDefinition)">
            <p class="form-control-like">
              {{ feature.value }}
            </p>
          </div>
        </ng-container>
      </ng-container>
    </div>
    <hr/>
    <div>
      <h5>{{ variant.price ? '$' + variant.price : '-' }}</h5>
      <button class="btn btn-block"
              [class.btn-primary]="isSelected"
              [class.btn-secondary]="!isSelected"
              [disabled]="isDisabled">
        {{ isSelected ? 'âœ“' : 'Select' }}
      </button>
    </div>
  </div>
</form>
